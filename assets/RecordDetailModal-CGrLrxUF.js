import{b as T,f as B}from"./element-plus-BK_ZoIQS.js";import{d as D}from"./vendor-sb8NPKxn.js";import{_ as F}from"./index-BQnEXoBF.js";import{c as h,m as M,o as N,C as x,D as t,O as a,u as l,B as R,M as $}from"./vue-vendor-BBv0KOb7.js";function i(s){if(s==null)return"0";const d=Math.abs(s);return d>=1e9?(s/1e9).toFixed(2)+"B":d>=1e6?(s/1e6).toFixed(2)+"M":d>=1e3?(s/1e3).toFixed(1)+"K":s.toLocaleString()}const V={class:"flex items-center justify-between"},Y={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},E={class:"space-y-4"},H={class:"grid gap-3 md:grid-cols-2"},O={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-800 dark:bg-gray-900"},S={class:"space-y-2 text-sm text-gray-700 dark:text-gray-300"},I={class:"flex items-center justify-between"},K={class:"font-medium"},L={class:"flex items-center justify-between"},q={class:"font-medium"},z={class:"flex items-center justify-between"},A={class:"font-medium"},G={class:"flex items-center justify-between"},J={class:"font-medium"},P={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-800 dark:bg-gray-900"},Q={class:"space-y-2 text-sm text-gray-700 dark:text-gray-300"},U={class:"flex items-center justify-between"},W={class:"font-semibold text-blue-600 dark:text-blue-400"},X={class:"flex items-center justify-between"},Z={class:"font-semibold text-green-600 dark:text-green-400"},tt={class:"flex items-center justify-between"},et={class:"font-semibold text-purple-600 dark:text-purple-400"},st={class:"flex items-center justify-between"},at={class:"font-semibold text-orange-600 dark:text-orange-400"},rt={class:"flex items-center justify-between"},ot={class:"font-semibold text-gray-900 dark:text-gray-100"},dt={class:"rounded-lg border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-gray-900"},nt={class:"grid gap-3 sm:grid-cols-2"},lt={class:"flex items-center justify-between rounded-md bg-gray-50 px-3 py-2 dark:bg-gray-800"},it={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ct={class:"flex items-center justify-between rounded-md bg-gray-50 px-3 py-2 dark:bg-gray-800"},gt={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},xt={class:"flex items-center justify-between rounded-md bg-gray-50 px-3 py-2 dark:bg-gray-800"},yt={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},mt={class:"flex items-center justify-between rounded-md bg-gray-50 px-3 py-2 dark:bg-gray-800"},ut={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ft={class:"mt-4 flex items-center justify-between rounded-md border border-gray-200 bg-gray-50 px-4 py-3 dark:border-gray-800 dark:bg-gray-800"},bt={class:"text-base font-bold text-yellow-600 dark:text-yellow-400"},pt={class:"flex justify-end"},kt={__name:"RecordDetailModal",props:{show:{type:Boolean,default:!1},record:{type:Object,default:()=>({})}},emits:["close"],setup(s,{emit:d}){const y=s,j=d,m=()=>j("close"),C=h(()=>{var o;return(o=y.record)!=null&&o.timestamp?D(y.record.timestamp).format("YYYY-MM-DD HH:mm:ss"):"未知时间"}),n=h(()=>{var c;const o=((c=y.record)==null?void 0:c.costBreakdown)||{},e=g=>{const r=typeof g=="number"?g:0;return r>=1?`$${r.toFixed(2)}`:r>=.001?`$${r.toFixed(4)}`:`$${r.toFixed(6)}`};return{input:e(o.input),output:e(o.output),cacheCreate:e(o.cacheCreate),cacheRead:e(o.cacheRead),total:e(o.total)}});return(o,e)=>{const c=T,g=B;return N(),M(g,{"append-to-body":!0,class:"record-detail-modal","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":s.show,"show-close":!1,top:"10vh",width:"720px",onClose:m},{header:x(()=>{var r;return[t("div",V,[t("div",null,[e[0]||(e[0]=t("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," 请求详情 ",-1)),t("p",Y,a(((r=s.record)==null?void 0:r.model)||"未知模型"),1)]),t("button",{"aria-label":"关闭",class:"rounded-full p-2 text-gray-500 transition hover:bg-gray-100 hover:text-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-gray-100",onClick:m},e[1]||(e[1]=[t("i",{class:"fas fa-times"},null,-1)]))])]}),footer:x(()=>[t("div",pt,[R(c,{type:"primary",onClick:m},{default:x(()=>e[19]||(e[19]=[$("关闭",-1)])),_:1,__:[19]})])]),default:x(()=>{var r,u,f,b,p,k,_,v,w;return[t("div",E,[t("div",H,[t("div",O,[e[6]||(e[6]=t("h4",{class:"mb-3 text-sm font-semibold text-gray-800 dark:text-gray-200"},"基本信息",-1)),t("ul",S,[t("li",I,[e[2]||(e[2]=t("span",{class:"text-gray-500 dark:text-gray-400"},"时间",-1)),t("span",K,a(C.value),1)]),t("li",L,[e[3]||(e[3]=t("span",{class:"text-gray-500 dark:text-gray-400"},"模型",-1)),t("span",q,a(((r=s.record)==null?void 0:r.model)||"未知模型"),1)]),t("li",z,[e[4]||(e[4]=t("span",{class:"text-gray-500 dark:text-gray-400"},"账户",-1)),t("span",A,a(((u=s.record)==null?void 0:u.accountName)||"未知账户"),1)]),t("li",G,[e[5]||(e[5]=t("span",{class:"text-gray-500 dark:text-gray-400"},"渠道",-1)),t("span",J,a(((f=s.record)==null?void 0:f.accountTypeName)||"未知渠道"),1)])])]),t("div",P,[e[12]||(e[12]=t("h4",{class:"mb-3 text-sm font-semibold text-gray-800 dark:text-gray-200"},"Token 使用",-1)),t("ul",Q,[t("li",U,[e[7]||(e[7]=t("span",{class:"text-gray-500 dark:text-gray-400"},"输入 Token",-1)),t("span",W,a(l(i)((b=s.record)==null?void 0:b.inputTokens)),1)]),t("li",X,[e[8]||(e[8]=t("span",{class:"text-gray-500 dark:text-gray-400"},"输出 Token",-1)),t("span",Z,a(l(i)((p=s.record)==null?void 0:p.outputTokens)),1)]),t("li",tt,[e[9]||(e[9]=t("span",{class:"text-gray-500 dark:text-gray-400"},"缓存创建",-1)),t("span",et,a(l(i)((k=s.record)==null?void 0:k.cacheCreateTokens)),1)]),t("li",st,[e[10]||(e[10]=t("span",{class:"text-gray-500 dark:text-gray-400"},"缓存读取",-1)),t("span",at,a(l(i)((_=s.record)==null?void 0:_.cacheReadTokens)),1)]),t("li",rt,[e[11]||(e[11]=t("span",{class:"text-gray-500 dark:text-gray-400"},"总计",-1)),t("span",ot,a(l(i)((v=s.record)==null?void 0:v.totalTokens)),1)])])])]),t("div",dt,[e[18]||(e[18]=t("h4",{class:"mb-3 text-sm font-semibold text-gray-800 dark:text-gray-200"},"费用详情",-1)),t("div",nt,[t("div",lt,[e[13]||(e[13]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"输入费用",-1)),t("span",it,a(n.value.input),1)]),t("div",ct,[e[14]||(e[14]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"输出费用",-1)),t("span",gt,a(n.value.output),1)]),t("div",xt,[e[15]||(e[15]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"缓存创建",-1)),t("span",yt,a(n.value.cacheCreate),1)]),t("div",mt,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"缓存读取",-1)),t("span",ut,a(n.value.cacheRead),1)])]),t("div",ft,[e[17]||(e[17]=t("span",{class:"text-sm font-semibold text-gray-700 dark:text-gray-200"},"总费用",-1)),t("div",bt,a(((w=s.record)==null?void 0:w.costFormatted)||n.value.total),1)])])])]}),_:1},8,["model-value"])}}},jt=F(kt,[["__scopeId","data-v-61b5b1eb"]]);export{jt as R,i as f};
